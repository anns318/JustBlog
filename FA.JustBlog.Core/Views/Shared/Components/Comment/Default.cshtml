@using Microsoft.AspNetCore.Identity
@model dynamic

@inject UserManager<User> _userManager
@{
    IEnumerable<Comment> comment = Model.comment;
    comment = comment.OrderByDescending(x => x.CreatedDate);
    var user =await _userManager.GetUserAsync(User);
}


<div class="d-flex ">
    <div class="w-100">
        <div >
            <div class="card"> 
                <div class="card-body">
                    <h4 class="card-title">Recent Comments</h4>
                </div>

                <div class="comment-widgets m-b-20" style="width:100%">

                    @foreach (var item in comment)
                    {
                        if (item.IsAnnonymous)
                        {
                            <div class="d-flex flex-row comment-row" style="width:100%">
                                <div class="p-2"><span class="round"><img src="https://i.imgur.com/uIgDDDd.jpg" alt="user" width="50"></span></div>
                                <div class="comment-text w-100">
                                    <div style="display:flex;align-items: baseline;gap: 10px">
                                        <h5>Annonymous</h5>
                                        <span class="date text-muted" style="font-size:1rem">@item.CreatedDate</span>
                                    </div>
                                    <div class="comment-footer">

                                        @*   <span class="label label-info">Pending</span> <span class="action-icons">
                                <a href="#" data-abc="true"><i class="fa fa-pencil"></i></a>
                                <a href="#" data-abc="true"><i class="fa fa-rotate-right"></i></a>
                                <a href="#" data-abc="true"><i class="fa fa-heart"></i></a>
                                </span> *@
                                    </div>
                                    <p class="m-b-5" style="padding: 0;margin: 0">@item.Content</p>
                                </div>
                            </div>
                        }else
                        {
                            <div class="d-flex flex-row comment-row" style="width:100%">
                                <div class="p-2"><span class="round"><img src="https://i.imgur.com/uIgDDDd.jpg" alt="user" width="50"></span></div>
                                <div class="comment-text w-100">
                                    <div style="display:flex;align-items: baseline;gap: 10px">
                                        <h5>@item.User.UserName</h5>
                                        <span class="date text-muted" style="font-size:1rem">@item.CreatedDate</span>
                                    </div>
                                    <div class="comment-footer">

                                        @*   <span class="label label-info">Pending</span> <span class="action-icons">
                                <a href="#" data-abc="true"><i class="fa fa-pencil"></i></a>
                                <a href="#" data-abc="true"><i class="fa fa-rotate-right"></i></a>
                                <a href="#" data-abc="true"><i class="fa fa-heart"></i></a>
                                </span> *@
                                    </div>
                                    <p class="m-b-5" style="padding: 0;margin: 0">@item.Content</p>
                                </div>
                            </div>
                        }

                    }

                    

                  
                </div>
            </div>

        </div>
    </div>
</div>